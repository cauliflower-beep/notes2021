面试题

# 1.事务四大特性

数据库的事务必须满足4个特性：原子性、一致性、隔离性、持久性。英文单词首字母合起来是：ACID。

在这些特性中，数据“一致性”为最终目标，其他特性都是为了达到这个目标而采取的手段。

数据库管理系统（DBMS）一般采用重执行日志来保证原子性、一致性和持久性。重执行日志记录了数据库变化的每一个动作，数据库在一个事务中执行一部分操作后发生错误退出，数据库即可根据重执行日志撤销已经执行的操作。对于已经提交的事务即使数据库崩溃，在重启数据库时也能够根据日志对尚未持久化的数据进行相应的重执行操作。

- 原子性

  事务中的多个数据库操作是一个不可分割的原子单元整体，只有所有的操作执行成功，整个事务才提交。事务中任何一个数据库操作失败，已经执行的任何操作都必须被撤销，让数据库返回初始状态。

- 隔离性

  所有操作全部执行完以前，其它会话不能看到过程。

- 一致性

  事务前后，数据总额一致。

- 持久性

  一旦事务提交，对数据的改变就是永久的。

# 2.数据库的隔离级别

多个连接各自操作数据库中的数据时，如果不考虑隔离性，可能会引发如下问题：

- 脏读，多次查询的数据值可能不一致。
- 不可重复读（算不算问题，取决于具体的业务场景）
- 幻读，强调查询的时候，可能查询到了之前查询没有看到过的数据。

为了避免上述问题，数据库系统要负责隔离操作，以保证各个连接在获取数据时的准确性。mysql隔离级别定义了事务与事务之间的隔离程度，分为：读未提交、读已提交、可重复读、可串行化。

# 3.mysql两种存储引擎区别

存储引擎是表级别的。数据库级别也可以设置，但最终生效还是表级别的。

- MYISAM

  不支持事务，不支持外键，表级锁，插入数据时，锁定整个表，查表总行数时，不需要全表扫描，所以访问速度很快。

  不需要支持事务，只是CURD的话，MYISAM是不二之选。

- INNODB

  支持事务，支持外键，行级锁。查表总行数时，需要全表扫描，写操作的处理效率差一些，并且会占用更多的磁盘空间以保留数据和索引。

  需要支持事务时，要选择INNODB。

# 4.聚簇索引和非聚簇索引

